<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HTML Viewer</title>
<style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    h1 { font-size: 24px; margin-bottom: 10px; }
    select { padding: 6px; font-size: 16px; width: 100%; max-width: 400px; }
    iframe { width: 100%; height: 80vh; border: 1px solid #ccc; margin-top: 15px; }
</style>
</head>
<body>
<h1>HTML Viewer</h1>

<label for="fileSelect">Select an HTML file:</label>
<select id="fileSelect">
    <option value="">-- Loading files --</option>
</select>

<iframe id="preview" src=""></iframe>

<script>
// Get dropdown and iframe elements
const select = document.getElementById('fileSelect');
const iframe = document.getElementById('preview');

// Fetch files.json generated by GitHub Action
fetch('files.json')
  .then(res => res.json())
  .then(files => {
      // Clear and populate select
      select.innerHTML = '<option value="">-- Select a file --</option>';
      files.forEach(file => {
          const option = document.createElement('option');
          option.value = file;
          option.textContent = file;
          select.appendChild(option);
      });
  })
  .catch(err => {
      console.error('Error loading files.json', err);
      select.innerHTML = '<option value="">Error loading files</option>';
  });

// Load selected HTML file in iframe
select.addEventListener('change', (e) => {
    const file = e.target.value;
    iframe.src = file ? file : '';
});
</script>

</body>
</html>